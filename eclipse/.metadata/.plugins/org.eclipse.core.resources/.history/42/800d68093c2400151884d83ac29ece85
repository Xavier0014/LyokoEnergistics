package com.xavier0014.lyokoenergistics.recipes;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;

import scala.annotation.meta.setter;
import net.minecraft.block.Block;
import net.minecraft.init.Blocks;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;

import com.xavier0014.lyokoenergistics.init.ModItem;

public class RecipesMaterializationScanner {
	
	private static final RecipesMaterializationScanner smeltingBase = new RecipesMaterializationScanner();
	private Map smeltingList = new HashMap(); 
	public ArrayList<ArrayList> recipe = new ArrayList<ArrayList>();
	
	public RecipesMaterializationScanner(){
		recipe.add(new ArrayList<ItemStack>());//result
		recipe.add(new ArrayList<Integer>());
		this.addRecipe(ModItem.matteringot, new ItemStack(Blocks.diamond_block),0,80);
		this.addRecipe(Blocks.bedrock, new ItemStack(ModItem.matteringot),1,40);
	}
	
	public void addRecipe(ItemStack stack1, ItemStack stack4,int id, int time) {
		ItemStack[] stackList = new ItemStack[]{stack1,};
		this.smeltingList.put(stackList, stack4);
		recipe.get(0).set(id,stack4);
		recipe.get(1).set(id,time);
	}

    public void addRecipe(Item item1, ItemStack stack,int id,int time) {
		this.addRecipe(new ItemStack(item1), stack,id, time);
	}
	
	public void addRecipe(Block block1, ItemStack stack,int id,int time) {
		this.addRecipe(Item.getItemFromBlock(block1), stack,id, time);
	}
	
	public ItemStack getSmeltingResult(ItemStack[] stack) {
	     Iterator iterator = this.smeltingList.entrySet().iterator();
	     Entry entry;

	     do {
	         if (!iterator.hasNext()) {
	             return null; 
	         }
           entry = (Entry)iterator.next(); 
       }
       while (!this.isSameKey(stack, (ItemStack[])entry.getKey())); 
	     
       return (ItemStack)entry.getValue(); 
	  }
	
	private boolean isSameKey(ItemStack[] stackList, ItemStack[] stackList2) {
		 boolean isSame = false;
		 for(int i=0; i<=0; i++) {
			 if(stackList[i].getItem() == stackList2[i].getItem()) 
			 {
				 isSame = true; 
			 }
			 else
			 {
				 return false; 
			 }
		 }
		 return isSame;
	 }
	
	public Map getSmeltingList()
	 {
       return this.smeltingList;
    }

	public static RecipesMaterializationScanner smelting()
	{
		return smeltingBase;
	}

}
